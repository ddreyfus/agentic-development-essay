<!-- @format -->

# 07_UI.md

This document is **normative**.  
It defines the SPA panels, their API dependencies, and the minimum client-side state required for the POC.

---

## Panels

### Panel A — New Match

**Purpose**

- Execute the primary flow: enter description → retrieve top-2 → select → confirm → view report.

**API usage**

- `POST /match`
- `PUT /matches/{id}`
- `GET /matches/{id}/report`
- `GET /documents/{id}` (modal details)

**UI elements**

- Query textarea + Search button
- Results table (exactly 2 rows when available)
- Candidate selection (single-select radio)
- Confirm + Generate Report button
- Submission details modal
- Report modal (markdown display + download)

---

### Panel B — Match History

**Purpose**

- Browse prior match decisions and retrieve reports.

**API usage**

- `GET /matches`
- `GET /matches/{id}/report`
- `GET /documents/{id}` (modal details)
- `PUT /matches/{id}` (change selection;)

**UI elements**

- Matches table (timestamp, query snippet, selected doc summary)
- Row actions: View submission, View report, Change selection

---

### Panel C — Document Catalog

**Purpose**

- Browse ingested documents and verify extracted fields.

**API usage**

- `GET /documents`
- `GET /documents/{id}`

**UI elements**

- Documents table (name, K-number, manufacturer, class)
- Row action: View submission (modal)

---

## Global header

**Purpose**

- Navigation, identity, and account-level actions.

**API usage**

- `GET /user/current`

**Header elements**

- App title
- Client + user identity display
- Navigation: New Match / Match History / Document Catalog
- User menu (dropdown):
  - View / Edit profile (stubbed in POC)
  - Logout (clears client-side session state)
  - Login (stubbed; redirects to placeholder)
- Ingest indicator (best-effort; may be static in POC)

**Notes**

- Profile edit, login, and logout are UI-only stubs in the POC.
- No backend mutation of user state is required or tested.

## Client-side state (minimum)

- `active_panel`: `"new_match" | "history" | "catalog"`
- `current_match_id`: integer | null
- `selected_document_id`: integer | null (current selection within New Match)
- `modal_state`:
  - `document_modal_open`: boolean
  - `document_modal_document_id`: integer | null
  - `report_modal_open`: boolean
  - `report_markdown`: string | null
- `error_banner`:
  - `visible`: boolean
  - `message`: string | null
